<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<!--
  yarn-site.xml — Configuration YARN
  Scheduler de ressources pour MapReduce et Tez
-->
<configuration>

  <!-- Adresse du ResourceManager -->
  <property>
    <n>yarn.resourcemanager.hostname</n>
    <value>bigdata-node</value>
  </property>

  <!-- Services auxiliaires du NodeManager (shuffle MR) -->
  <property>
    <n>yarn.nodemanager.aux-services</n>
    <value>mapreduce_shuffle</value>
  </property>
  <property>
    <n>yarn.nodemanager.aux-services.mapreduce_shuffle.class</n>
    <value>org.apache.hadoop.mapred.ShuffleHandler</value>
  </property>

  <!-- Mémoire totale disponible pour les conteneurs YARN -->
  <property>
    <n>yarn.nodemanager.resource.memory-mb</n>
    <value>4096</value>
    <description>Adapter selon la RAM de la machine hôte</description>
  </property>

  <!-- Allocation max par conteneur -->
  <property>
    <n>yarn.scheduler.maximum-allocation-mb</n>
    <value>4096</value>
  </property>

  <!-- Allocation min par conteneur -->
  <property>
    <n>yarn.scheduler.minimum-allocation-mb</n>
    <value>256</value>
  </property>

  <!-- Autoriser l'exécution en tant que root (cours uniquement) -->
  <property>
    <n>yarn.nodemanager.container-executor.class</n>
    <value>org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor</value>
  </property>

  <!-- UI ResourceManager -->
  <property>
    <n>yarn.resourcemanager.webapp.address</n>
    <value>bigdata-node:8088</value>
  </property>

  <!-- Vérification du système virtuel de mémoire (désactiver en cours) -->
  <property>
    <n>yarn.nodemanager.vmem-check-enabled</n>
    <value>false</value>
  </property>

</configuration>
